<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarStock Pro - Inventory Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2rem;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 4px;
            transition: background 0.3s;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 20px;
        }

        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .card-header h2 {
            font-size: 1.4rem;
            color: var(--primary);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #27ae60;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--secondary);
        }

        .stat-card h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            color: var(--primary);
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 500;
        }

        .inventory-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .inventory-table th, .inventory-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .inventory-table th {
            background-color: #f8f9fa;
            color: var(--primary);
            font-weight: 600;
        }

        .inventory-table tr:hover {
            background-color: #f8f9fa;
        }

        .low-stock {
            color: var(--danger);
            font-weight: 600;
        }

        .good-stock {
            color: var(--success);
            font-weight: 600;
        }

        .stock-level {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .low {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger);
        }

        .medium {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning);
        }

        .high {
            background: rgba(46, 204, 113, 0.1);
            color: var(--success);
        }

        .search-bar {
            display: flex;
            margin-bottom: 20px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px 0 0 5px;
            font-size: 1rem;
        }

        .search-bar button {
            padding: 12px 20px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }

        .scanner-section {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .scanner {
            width: 300px;
            height: 200px;
            margin: 0 auto 20px;
            background: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #7f8c8d;
            cursor: pointer;
        }

        .scanner i {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            width: 500px;
            max-width: 90%;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: var(--primary);
        }

        .close {
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--primary);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 30px;
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: #7f8c8d;
            border-top: 1px solid #eee;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom: 3px solid var(--secondary);
            color: var(--secondary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .venue-list, .user-list, .area-list {
            margin-top: 20px;
        }

        .venue-item, .user-item, .area-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .item-actions {
            display: flex;
            gap: 10px;
        }

        .item-actions button {
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        .multi-user-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(52, 152, 219, 0.1);
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .multi-user-indicator i {
            color: var(--secondary);
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-wine-bottle"></i>
                    <h1>BarStock Pro</h1>
                </div>
                <div class="nav-links">
                    <a href="#" class="active"><i class="fas fa-home"></i> Dashboard</a>
                    <a href="#"><i class="fas fa-clipboard-list"></i> Stocktake</a>
                    <a href="#"><i class="fas fa-chart-bar"></i> Reports</a>
                    <a href="#" id="settingsBtn"><i class="fas fa-cog"></i> Settings</a>
                </div>
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span>Admin User</span>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="multi-user-indicator">
            <i class="fas fa-users"></i>
            <span>3 users currently active in this venue</span>
        </div>

        <div class="stats">
            <div class="stat-card">
                <i class="fas fa-wine-bottle"></i>
                <h3 id="totalProducts">142</h3>
                <p>Total Products</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-exclamation-triangle"></i>
                <h3 id="lowStockItems">18</h3>
                <p>Low Stock Items</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-check-circle"></i>
                <h3 id="inventoryAccuracy">94%</h3>
                <p>Inventory Accuracy</p>
            </div>
        </div>

        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <h2>Quick Actions</h2>
                </div>
                <div class="action-buttons" style="flex-direction: column;">
                    <button class="btn btn-primary" id="startStocktake">
                        <i class="fas fa-clipboard-list"></i> Start Stocktake
                    </button>
                    <button class="btn btn-success" id="addProduct">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                    <button class="btn btn-primary" id="bulkUploadBtn">
                        <i class="fas fa-file-upload"></i> Bulk Upload
                    </button>
                    <button class="btn btn-primary" id="exportReport">
                        <i class="fas fa-file-export"></i> Export Report
                    </button>
                </div>

                <div class="card-header" style="margin-top: 20px;">
                    <h2>Venue Selection</h2>
                </div>
                <div class="form-group">
                    <select id="venueSelector" class="form-control">
                        <option value="1">Downtown Bar</option>
                        <option value="2">Rooftop Lounge</option>
                        <option value="3">Pool Bar</option>
                    </select>
                </div>

                <div class="card-header" style="margin-top: 20px;">
                    <h2>Area Selection</h2>
                </div>
                <div class="form-group">
                    <select id="areaSelector" class="form-control">
                        <option value="1">Main Bar</option>
                        <option value="2">Storage Room</option>
                        <option value="3">Wine Cellar</option>
                    </select>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Inventory Overview</h2>
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search products...">
                        <button id="searchBtn"><i class="fas fa-search"></i></button>
                    </div>
                </div>
                <table class="inventory-table">
                    <thead>
                        <tr>
                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Current Stock</th>
                            <th>Par Level</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTableBody">
                        <!-- Inventory items will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="scanner-section">
            <h2>Quick Stocktake with Barcode Scanner</h2>
            <p>Scan barcodes to quickly update inventory counts</p>
            <div class="scanner" id="barcodeScanner">
                <i class="fas fa-barcode"></i>
                <p>Click to simulate barcode scan</p>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" id="openCamera">
                    <i class="fas fa-camera"></i> Open Camera
                </button>
                <button class="btn btn-success" id="uploadCSV">
                    <i class="fas fa-upload"></i> Upload CSV
                </button>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Product</h2>
                <span class="close" id="closeProductModal">&times;</span>
            </div>
            <form id="productForm">
                <div class="form-group">
                    <label for="productName">Product Name</label>
                    <input type="text" id="productName" required>
                </div>
                <div class="form-group">
                    <label for="productCategory">Category</label>
                    <select id="productCategory" required>
                        <option value="">Select Category</option>
                        <option value="Whiskey">Whiskey</option>
                        <option value="Vodka">Vodka</option>
                        <option value="Gin">Gin</option>
                        <option value="Rum">Rum</option>
                        <option value="Tequila">Tequila</option>
                        <option value="Beer">Beer</option>
                        <option value="Wine">Wine</option>
                        <option value="Mixers">Mixers</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productStock">Current Stock</label>
                    <input type="number" id="productStock" required min="0">
                </div>
                <div class="form-group">
                    <label for="productPar">Par Level</label>
                    <input type="number" id="productPar" required min="1">
                </div>
                <div class="form-group">
                    <label for="productBarcode">Barcode (optional)</label>
                    <input type="text" id="productBarcode">
                </div>
                <div class="form-group">
                    <label for="productCost">Cost per Unit ($)</label>
                    <input type="number" id="productCost" step="0.01" min="0">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-danger" id="cancelProduct">Cancel</button>
                    <button type="submit" class="btn btn-success">Add Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>System Settings</h2>
                <span class="close" id="closeSettingsModal">&times;</span>
            </div>
            <div class="tabs">
                <div class="tab active" data-tab="venues">Venues</div>
                <div class="tab" data-tab="users">Users</div>
                <div class="tab" data-tab="areas">Areas</div>
            </div>
            
            <div class="tab-content active" id="venues-tab">
                <div class="card-header">
                    <h3>Manage Venues</h3>
                    <button class="btn btn-success" id="addVenueBtn">
                        <i class="fas fa-plus"></i> Add Venue
                    </button>
                </div>
                <div class="venue-list" id="venueList">
                    <!-- Venues will be populated here -->
                </div>
            </div>
            
            <div class="tab-content" id="users-tab">
                <div class="card-header">
                    <h3>Manage Users</h3>
                    <button class="btn btn-success" id="addUserBtn">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                </div>
                <div class="user-list" id="userList">
                    <!-- Users will be populated here -->
                </div>
            </div>
            
            <div class="tab-content" id="areas-tab">
                <div class="card-header">
                    <h3>Manage Areas</h3>
                    <button class="btn btn-success" id="addAreaBtn">
                        <i class="fas fa-plus"></i> Add Area
                    </button>
                </div>
                <div class="area-list" id="areaList">
                    <!-- Areas will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Upload Modal -->
    <div class="modal" id="bulkUploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Bulk Upload Products</h2>
                <span class="close" id="closeBulkUploadModal">&times;</span>
            </div>
            <div class="form-group">
                <label for="uploadFile">Select CSV File</label>
                <input type="file" id="uploadFile" accept=".csv">
                <p style="margin-top: 10px; font-size: 0.9rem; color: #7f8c8d;">
                    CSV format: Name,Category,Stock,Par Level,Barcode,Cost
                </p>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-danger" id="cancelUpload">Cancel</button>
                <button type="button" class="btn btn-success" id="processUpload">Process Upload</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>BarStock Pro Inventory Management System &copy; 2023 | Multi-Venue & Multi-User Support</p>
        </div>
    </footer>

    <script>
        // Sample data
        let inventoryData = [
            { id: 1, name: "Jameson Irish Whiskey", category: "Whiskey", stock: 3, parLevel: 12, barcode: "123456789", cost: 25.50 },
            { id: 2, name: "Bombay Sapphire Gin", category: "Gin", stock: 15, parLevel: 10, barcode: "234567890", cost: 28.75 },
            { id: 3, name: "Patrón Silver Tequila", category: "Tequila", stock: 8, parLevel: 8, barcode: "345678901", cost: 45.00 },
            { id: 4, name: "Grey Goose Vodka", category: "Vodka", stock: 2, parLevel: 10, barcode: "456789012", cost: 32.25 },
            { id: 5, name: "Captain Morgan Spiced Rum", category: "Rum", stock: 12, parLevel: 8, barcode: "567890123", cost: 18.50 }
        ];

        let venues = [
            { id: 1, name: "Downtown Bar", address: "123 Main St", manager: "John Smith" },
            { id: 2, name: "Rooftop Lounge", address: "456 High St", manager: "Sarah Johnson" },
            { id: 3, name: "Pool Bar", address: "789 Beach Rd", manager: "Mike Davis" }
        ];

        let users = [
            { id: 1, name: "Admin User", email: "admin@barstock.com", role: "Administrator", status: "Active" },
            { id: 2, name: "Manager One", email: "manager1@barstock.com", role: "Manager", status: "Active" },
            { id: 3, name: "Staff User", email: "staff@barstock.com", role: "Staff", status: "Active" }
        ];

        let areas = [
            { id: 1, name: "Main Bar", venue: "Downtown Bar", description: "Primary serving area" },
            { id: 2, name: "Storage Room", venue: "Downtown Bar", description: "Backstock storage" },
            { id: 3, name: "Wine Cellar", venue: "Downtown Bar", description: "Temperature controlled wine storage" }
        ];

        // DOM Elements
        const addProductBtn = document.getElementById('addProduct');
        const addProductModal = document.getElementById('addProductModal');
        const settingsBtn = document.getElementById('settingsBtn');
        const settingsModal = document.getElementById('settingsModal');
        const bulkUploadBtn = document.getElementById('bulkUploadBtn');
        const bulkUploadModal = document.getElementById('bulkUploadModal');
        const closeProductModal = document.getElementById('closeProductModal');
        const closeSettingsModal = document.getElementById('closeSettingsModal');
        const closeBulkUploadModal = document.getElementById('closeBulkUploadModal');
        const cancelProduct = document.getElementById('cancelProduct');
        const cancelUpload = document.getElementById('cancelUpload');
        const productForm = document.getElementById('productForm');
        const inventoryTableBody = document.getElementById('inventoryTableBody');
        const venueList = document.getElementById('venueList');
        const userList = document.getElementById('userList');
        const areaList = document.getElementById('areaList');
        const addVenueBtn = document.getElementById('addVenueBtn');
        const addUserBtn = document.getElementById('addUserBtn');
        const addAreaBtn = document.getElementById('addAreaBtn');
        const tabs = document.querySelectorAll('.tab');
        const processUpload = document.getElementById('processUpload');
        const barcodeScanner = document.getElementById('barcodeScanner');
        const openCamera = document.getElementById('openCamera');
        const uploadCSV = document.getElementById('uploadCSV');
        const startStocktake = document.getElementById('startStocktake');
        const exportReport = document.getElementById('exportReport');
        const searchBtn = document.getElementById('searchBtn');
        const searchInput = document.getElementById('searchInput');

        // Initialize the application
        function init() {
            renderInventoryTable();
            renderVenues();
            renderUsers();
            renderAreas();
            updateStats();
            
            // Set up event listeners
            setupEventListeners();
        }

        // Set up all event listeners
        function setupEventListeners() {
            // Modal open/close
            addProductBtn.addEventListener('click', () => toggleModal(addProductModal));
            settingsBtn.addEventListener('click', () => toggleModal(settingsModal));
            bulkUploadBtn.addEventListener('click', () => toggleModal(bulkUploadModal));
            
            // Close modal buttons
            closeProductModal.addEventListener('click', () => toggleModal(addProductModal));
            closeSettingsModal.addEventListener('click', () => toggleModal(settingsModal));
            closeBulkUploadModal.addEventListener('click', () => toggleModal(bulkUploadModal));
            
            // Cancel buttons
            cancelProduct.addEventListener('click', () => toggleModal(addProductModal));
            cancelUpload.addEventListener('click', () => toggleModal(bulkUploadModal));
            
            // Form submission
            productForm.addEventListener('submit', handleProductSubmit);
            
            // Tabs
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    activateTab(tabId);
                });
            });
            
            // Buttons
            processUpload.addEventListener('click', handleBulkUpload);
            barcodeScanner.addEventListener('click', simulateBarcodeScan);
            openCamera.addEventListener('click', openCameraScanner);
            uploadCSV.addEventListener('click', () => toggleModal(bulkUploadModal));
            startStocktake.addEventListener('click', startStocktakeSession);
            exportReport.addEventListener('click', exportInventoryReport);
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') handleSearch();
            });
            
            // Add new items
            addVenueBtn.addEventListener('click', () => addNewItem('venue'));
            addUserBtn.addEventListener('click', () => addNewItem('user'));
            addAreaBtn.addEventListener('click', () => addNewItem('area'));
        }

        // Modal functions
        function toggleModal(modal) {
            if (modal.style.display === 'flex') {
                modal.style.display = 'none';
            } else {
                modal.style.display = 'flex';
            }
        }

        function activateTab(tabId) {
            // Deactivate all tabs
            tabs.forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Activate selected tab
            document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(`${tabId}-tab`).classList.add('active');
        }

        // Render functions
        function renderInventoryTable() {
            inventoryTableBody.innerHTML = '';
            
            inventoryData.forEach(item => {
                const status = getStockStatus(item.stock, item.parLevel);
                const statusClass = status === 'Low' ? 'low' : status === 'Medium' ? 'medium' : 'high';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.category}</td>
                    <td class="${item.stock < item.parLevel * 0.3 ? 'low-stock' : 'good-stock'}">${item.stock}</td>
                    <td>${item.parLevel}</td>
                    <td><span class="stock-level ${statusClass}">${status} Stock</span></td>
                    <td>
                        <button class="btn btn-primary edit-product" data-id="${item.id}" style="padding: 5px 10px; font-size: 0.8rem;">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger delete-product" data-id="${item.id}" style="padding: 5px 10px; font-size: 0.8rem;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                inventoryTableBody.appendChild(row);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.edit-product').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = e.currentTarget.getAttribute('data-id');
                    editProduct(productId);
                });
            });
            
            document.querySelectorAll('.delete-product').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = e.currentTarget.getAttribute('data-id');
                    deleteProduct(productId);
                });
            });
        }

        function renderVenues() {
            venueList.innerHTML = '';
            
            venues.forEach(venue => {
                const venueItem = document.createElement('div');
                venueItem.className = 'venue-item';
                venueItem.innerHTML = `
                    <div>
                        <h4>${venue.name}</h4>
                        <p>${venue.address} | Manager: ${venue.manager}</p>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-primary edit-venue" data-id="${venue.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger delete-venue" data-id="${venue.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                venueList.appendChild(venueItem);
            });
            
            // Add event listeners to venue buttons
            document.querySelectorAll('.edit-venue').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const venueId = e.currentTarget.getAttribute('data-id');
                    editVenue(venueId);
                });
            });
            
            document.querySelectorAll('.delete-venue').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const venueId = e.currentTarget.getAttribute('data-id');
                    deleteVenue(venueId);
                });
            });
        }

        function renderUsers() {
            userList.innerHTML = '';
            
            users.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div>
                        <h4>${user.name}</h4>
                        <p>${user.email} | ${user.role} | Status: ${user.status}</p>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-primary edit-user" data-id="${user.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger delete-user" data-id="${user.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                userList.appendChild(userItem);
            });
            
            // Add event listeners to user buttons
            document.querySelectorAll('.edit-user').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const userId = e.currentTarget.getAttribute('data-id');
                    editUser(userId);
                });
            });
            
            document.querySelectorAll('.delete-user').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const userId = e.currentTarget.getAttribute('data-id');
                    deleteUser(userId);
                });
            });
        }

        function renderAreas() {
            areaList.innerHTML = '';
            
            areas.forEach(area => {
                const areaItem = document.createElement('div');
                areaItem.className = 'area-item';
                areaItem.innerHTML = `
                    <div>
                        <h4>${area.name}</h4>
                        <p>${area.venue} | ${area.description}</p>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-primary edit-area" data-id="${area.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger delete-area" data-id="${area.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                areaList.appendChild(areaItem);
            });
            
            // Add event listeners to area buttons
            document.querySelectorAll('.edit-area').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const areaId = e.currentTarget.getAttribute('data-id');
                    editArea(areaId);
                });
            });
            
            document.querySelectorAll('.delete-area').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const areaId = e.currentTarget.getAttribute('data-id');
                    deleteArea(areaId);
                });
            });
        }

        // Helper functions
        function getStockStatus(stock, parLevel) {
            const percentage = stock / parLevel;
            if (percentage < 0.3) return 'Low';
            if (percentage < 0.7) return 'Medium';
            return 'High';
        }

        function updateStats() {
            const totalProducts = inventoryData.length;
            const lowStockItems = inventoryData.filter(item => item.stock < item.parLevel * 0.3).length;
            const inventoryAccuracy = 94; // This would be calculated in a real app
            
            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('lowStockItems').textContent = lowStockItems;
            document.getElementById('inventoryAccuracy').textContent = `${inventoryAccuracy}%`;
        }

        // Event handlers
        function handleProductSubmit(e) {
            e.preventDefault();
            
            const newProduct = {
                id: inventoryData.length + 1,
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                stock: parseInt(document.getElementById('productStock').value),
                parLevel: parseInt(document.getElementById('productPar').value),
                barcode: document.getElementById('productBarcode').value,
                cost: parseFloat(document.getElementById('productCost').value) || 0
            };
            
            inventoryData.push(newProduct);
            renderInventoryTable();
            updateStats();
            toggleModal(addProductModal);
            productForm.reset();
            
            alert('Product added successfully!');
        }

        function handleBulkUpload() {
            const fileInput = document.getElementById('uploadFile');
            if (!fileInput.files.length) {
                alert('Please select a file to upload');
                return;
            }
            
            // In a real application, you would process the CSV file here
            // For this demo, we'll just simulate adding some products
            const newProducts = [
                { id: inventoryData.length + 1, name: "Jack Daniels", category: "Whiskey", stock: 7, parLevel: 10, barcode: "678901234", cost: 28.50 },
                { id: inventoryData.length + 2, name: "Tanqueray Gin", category: "Gin", stock: 9, parLevel: 8, barcode: "789012345", cost: 30.25 }
            ];
            
            newProducts.forEach(product => inventoryData.push(product));
            renderInventoryTable();
            updateStats();
            toggleModal(bulkUploadModal);
            fileInput.value = '';
            
            alert('Bulk upload completed! 2 new products added.');
        }

        function simulateBarcodeScan() {
            // In a real app, this would interface with a barcode scanner
            // For demo purposes, we'll simulate scanning a product
            const randomProduct = inventoryData[Math.floor(Math.random() * inventoryData.length)];
            alert(`Barcode scanned! Product: ${randomProduct.name}. Current stock: ${randomProduct.stock}`);
            
            // Update stock count (simulating a scan that reduces stock by 1)
            randomProduct.stock = Math.max(0, randomProduct.stock - 1);
            renderInventoryTable();
            updateStats();
        }

        function openCameraScanner() {
            alert('Camera opened for barcode scanning. In a real app, this would access your device camera.');
        }

        function startStocktakeSession() {
            alert('Starting new stocktake session... All users in this venue will be notified.');
        }

        function exportInventoryReport() {
            alert('Inventory report exported successfully!');
        }

        function handleSearch() {
            const searchTerm = searchInput.value.toLowerCase();
            const filteredData = inventoryData.filter(item => 
                item.name.toLowerCase().includes(searchTerm) || 
                item.category.toLowerCase().includes(searchTerm)
            );
            
            // Temporarily display filtered results
            const originalData = [...inventoryData];
            inventoryData.length = 0;
            inventoryData.push(...filteredData);
            renderInventoryTable();
            
            // Restore original data after a delay
            setTimeout(() => {
                inventoryData.length = 0;
                inventoryData.push(...originalData);
                renderInventoryTable();
            }, 3000);
        }

        function editProduct(productId) {
            const product = inventoryData.find(item => item.id == productId);
            if (product) {
                document.getElementById('productName').value = product.name;
                document.getElementById('productCategory').value = product.category;
                document.getElementById('productStock').value = product.stock;
                document.getElementById('productPar').value = product.parLevel;
                document.getElementById('productBarcode').value = product.barcode;
                document.getElementById('productCost').value = product.cost;
                
                // Change form to edit mode
                document.querySelector('#addProductModal .modal-header h2').textContent = 'Edit Product';
                document.querySelector('#productForm button[type="submit"]').textContent = 'Update Product';
                
                // Remove existing submit listener to avoid duplicates
                const newForm = productForm.cloneNode(true);
                productForm.parentNode.replaceChild(newForm, productForm);
                
                // Add update listener
                newForm.addEventListener('submit', function updateProduct(e) {
                    e.preventDefault();
                    
                    product.name = document.getElementById('productName').value;
                    product.category = document.getElementById('productCategory').value;
                    product.stock = parseInt(document.getElementById('productStock').value);
                    product.parLevel = parseInt(document.getElementById('productPar').value);
                    product.barcode = document.getElementById('productBarcode').value;
                    product.cost = parseFloat(document.getElementById('productCost').value) || 0;
                    
                    renderInventoryTable();
                    updateStats();
                    toggleModal(addProductModal);
                    newForm.reset();
                    
                    alert('Product updated successfully!');
                });
                
                toggleModal(addProductModal);
            }
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                const index = inventoryData.findIndex(item => item.id == productId);
                if (index !== -1) {
                    inventoryData.splice(index, 1);
                    renderInventoryTable();
                    updateStats();
                    alert('Product deleted successfully!');
                }
            }
        }

        function addNewItem(type) {
            let name = prompt(`Enter ${type} name:`);
            if (name) {
                let newItem;
                
                switch(type) {
                    case 'venue':
                        const address = prompt('Enter address:');
                        const manager = prompt('Enter manager name:');
                        newItem = {
                            id: venues.length + 1,
                            name: name,
                            address: address,
                            manager: manager
                        };
                        venues.push(newItem);
                        renderVenues();
                        break;
                        
                    case 'user':
                        const email = prompt('Enter email:');
                        const role = prompt('Enter role (Admin/Manager/Staff):');
                        newItem = {
                            id: users.length + 1,
                            name: name,
                            email: email,
                            role: role,
                            status: 'Active'
                        };
                        users.push(newItem);
                        renderUsers();
                        break;
                        
                    case 'area':
                        const venue = prompt('Enter venue:');
                        const description = prompt('Enter description:');
                        newItem = {
                            id: areas.length + 1,
                            name: name,
                            venue: venue,
                            description: description
                        };
                        areas.push(newItem);
                        renderAreas();
                        break;
                }
                
                alert(`${type.charAt(0).toUpperCase() + type.slice(1)} added successfully!`);
            }
        }

        function editVenue(venueId) {
            const venue = venues.find(v => v.id == venueId);
            if (venue) {
                const newName = prompt('Enter new venue name:', venue.name);
                if (newName) {
                    venue.name = newName;
                    renderVenues();
                    alert('Venue updated successfully!');
                }
            }
        }

        function deleteVenue(venueId) {
            if (confirm('Are you sure you want to delete this venue?')) {
                const index = venues.findIndex(v => v.id == venueId);
                if (index !== -1) {
                    venues.splice(index, 1);
                    renderVenues();
                    alert('Venue deleted successfully!');
                }
            }
        }

        function editUser(userId) {
            const user = users.find(u => u.id == userId);
            if (user) {
                const newName = prompt('Enter new user name:', user.name);
                if (newName) {
                    user.name = newName;
                    renderUsers();
                    alert('User updated successfully!');
                }
            }
        }

        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                const index = users.findIndex(u => u.id == userId);
                if (index !== -1) {
                    users.splice(index, 1);
                    renderUsers();
                    alert('User deleted successfully!');
                }
            }
        }

        function editArea(areaId) {
            const area = areas.find(a => a.id == areaId);
            if (area) {
                const newName = prompt('Enter new area name:', area.name);
                if (newName) {
                    area.name = newName;
                    renderAreas();
                    alert('Area updated successfully!');
                }
            }
        }

        function deleteArea(areaId) {
            if (confirm('Are you sure you want to delete this area?')) {
                const index = areas.findIndex(a => a.id == areaId);
                if (index !== -1) {
                    areas.splice(index, 1);
                    renderAreas();
                    alert('Area deleted successfully!');
                }
            }
        }

        // Initialize the application when the DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
